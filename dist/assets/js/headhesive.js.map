{"version":3,"sources":["headhesive.js"],"names":["root","factory","define","amd","exports","module","Headhesive","_mergeObj","to","from","p","hasOwnProperty","_throttle","func","wait","_now","Date","now","getTime","context","args","result","timeout","previous","later","apply","remaining","arguments","clearTimeout","setTimeout","_getScrollY","window","pageYOffset","undefined","document","documentElement","body","parentNode","scrollTop","_getElemY","elem","side","pos","elemHeight","offsetHeight","offsetTop","offsetParent","options","visible","offset","offsetSide","classes","clone","stick","unstick","throttle","onInit","onStick","onUnstick","onDestroy","querySelector","init","prototype","constructor","clonedElem","cloneNode","className","insertBefore","firstChild","scrollOffset","_setScrollOffset","Error","_throttleUpdate","update","bind","_throttleScrollOffset","addEventListener","call","destroy","removeChild","removeEventListener","replace","RegExp"],"mappings":"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","sourcesContent":["/*!\n * Headhesive.js v1.2.3 - An on-demand sticky header\n * Author: Copyright (c) Mark Goodyear <@markgdyr> <http://markgoodyear.com>\n * Url: http://markgoodyear.com/labs/headhesive\n * License: MIT\n */\n(function(root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], function() {\n      return factory();\n    });\n  } else if (typeof exports === \"object\") {\n    module.exports = factory();\n  } else {\n    root.Headhesive = factory();\n  }\n})(this, function() {\n  \"use strict\";\n  var _mergeObj = function(to, from) {\n    for (var p in from) {\n      if (from.hasOwnProperty(p)) {\n        to[p] = typeof from[p] === \"object\" ? _mergeObj(to[p], from[p]) : from[p];\n      }\n    }\n    return to;\n  };\n  var _throttle = function(func, wait) {\n    var _now = Date.now || function() {\n      return new Date().getTime();\n    };\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    var later = function() {\n      previous = _now();\n      timeout = null;\n      result = func.apply(context, args);\n      context = args = null;\n    };\n    return function() {\n      var now = _now();\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        context = args = null;\n      } else if (!timeout) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n  var _getScrollY = function() {\n    return window.pageYOffset !== undefined ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n  };\n  var _getElemY = function(elem, side) {\n    var pos = 0;\n    var elemHeight = elem.offsetHeight;\n    while (elem) {\n      pos += elem.offsetTop;\n      elem = elem.offsetParent;\n    }\n    if (side === \"bottom\") {\n      pos = pos + elemHeight;\n    }\n    return pos;\n  };\n  var Headhesive = function(elem, options) {\n    if (!(\"querySelector\" in document && \"addEventListener\" in window)) {\n      return;\n    }\n    this.visible = false;\n    this.options = {\n      offset: 300,\n      offsetSide: \"top\",\n      classes: {\n        clone: \"headhesive\",\n        stick: \"headhesive--stick\",\n        unstick: \"headhesive--unstick\"\n      },\n      throttle: 250,\n      onInit: function() {},\n      onStick: function() {},\n      onUnstick: function() {},\n      onDestroy: function() {}\n    };\n    this.elem = typeof elem === \"string\" ? document.querySelector(elem) : elem;\n    this.options = _mergeObj(this.options, options);\n    this.init();\n  };\n  Headhesive.prototype = {\n    constructor: Headhesive,\n    init: function() {\n      this.clonedElem = this.elem.cloneNode(true);\n      this.clonedElem.className += \" \" + this.options.classes.clone;\n      document.body.insertBefore(this.clonedElem, document.body.firstChild);\n      if (typeof this.options.offset === \"number\") {\n        this.scrollOffset = this.options.offset;\n      } else if (typeof this.options.offset === \"string\") {\n        this._setScrollOffset();\n      } else {\n        throw new Error(\"Invalid offset: \" + this.options.offset);\n      }\n      this._throttleUpdate = _throttle(this.update.bind(this), this.options.throttle);\n      this._throttleScrollOffset = _throttle(this._setScrollOffset.bind(this), this.options.throttle);\n      window.addEventListener(\"scroll\", this._throttleUpdate, false);\n      window.addEventListener(\"resize\", this._throttleScrollOffset, false);\n      this.options.onInit.call(this);\n    },\n    _setScrollOffset: function() {\n      if (typeof this.options.offset === \"string\") {\n        this.scrollOffset = _getElemY(document.querySelector(this.options.offset), this.options.offsetSide);\n      }\n    },\n    destroy: function() {\n      document.body.removeChild(this.clonedElem);\n      window.removeEventListener(\"scroll\", this._throttleUpdate);\n      window.removeEventListener(\"resize\", this._throttleScrollOffset);\n      this.options.onDestroy.call(this);\n    },\n    stick: function() {\n      if (!this.visible) {\n        this.clonedElem.className = this.clonedElem.className.replace(new RegExp(\"(^|\\\\s)*\" + this.options.classes.unstick + \"(\\\\s|$)*\", \"g\"), \"\");\n        this.clonedElem.className += \" \" + this.options.classes.stick;\n        this.visible = true;\n        this.options.onStick.call(this);\n      }\n    },\n    unstick: function() {\n      if (this.visible) {\n        this.clonedElem.className = this.clonedElem.className.replace(new RegExp(\"(^|\\\\s)*\" + this.options.classes.stick + \"(\\\\s|$)*\", \"g\"), \"\");\n        this.clonedElem.className += \" \" + this.options.classes.unstick;\n        this.visible = false;\n        this.options.onUnstick.call(this);\n      }\n    },\n    update: function() {\n      if (_getScrollY() > this.scrollOffset) {\n        this.stick();\n      } else {\n        this.unstick();\n      }\n    }\n  };\n  return Headhesive;\n});"],"file":"headhesive.js"}